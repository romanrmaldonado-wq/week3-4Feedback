<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Training Feedback System</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #1e3a5f 0%, #2563eb 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab {
            flex: 1;
            min-width: 150px;
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .tab:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .tab.active {
            background: white;
            color: #2563eb;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .card h2 {
            color: #2563eb;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .card h3 {
            color: #1e3a5f;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2563eb;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .rating-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .rating-option {
            flex: 1;
            min-width: 100px;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .rating-option:hover {
            border-color: #2563eb;
            background: #eff6ff;
        }

        .rating-option.selected {
            border-color: #2563eb;
            background: #2563eb;
            color: white;
        }

        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn-primary {
            background: #2563eb;
            color: white;
        }

        .btn-primary:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
        }

        .btn-secondary {
            background: #10b981;
            color: white;
            margin-bottom: 15px;
        }

        .btn-secondary:hover {
            background: #059669;
        }

        .btn-small {
            padding: 8px 16px;
            width: auto;
            font-size: 0.9rem;
        }

        .name-input-area {
            margin-bottom: 20px;
        }

        .name-input-area textarea {
            min-height: 120px;
            font-family: monospace;
        }

        .name-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .name-tag {
            background: #dbeafe;
            color: #1e40af;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .name-tag button {
            background: none;
            border: none;
            color: #1e40af;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0;
            line-height: 1;
        }

        .team-tag {
            background: #fef3c7;
            color: #92400e;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .team-tag:hover {
            background: #fde68a;
            transform: translateY(-1px);
        }

        .team-tag.selected {
            background: #2563eb;
            color: white;
        }

        .team-tag button {
            background: none;
            border: none;
            color: inherit;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0;
            line-height: 1;
        }

        .feedback-entry {
            background: #eff6ff;
            border-left: 4px solid #2563eb;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        .feedback-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
            align-items: flex-start;
        }

        .feedback-meta {
            color: #666;
            font-size: 0.9rem;
        }

        .team-badge {
            background: #fef3c7;
            color: #92400e;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
            margin-top: 5px;
        }

        .feedback-field {
            margin-bottom: 12px;
        }

        .feedback-field strong {
            color: #2563eb;
            display: inline-block;
            min-width: 150px;
        }

        .btn-delete {
            padding: 8px 16px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-delete:hover {
            background: #dc2626;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .btn-delete:active {
            transform: translateY(0);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .success-message {
            background: #d1fae5;
            color: #065f46;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }

        .filter-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .team-selection-area {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 8px;
        }

        .team-selection-area label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #1e3a5f;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .card {
                padding: 20px;
            }

            .rating-group {
                flex-direction: column;
            }

            .tabs {
                flex-direction: column;
            }

            .tab {
                min-width: 100%;
            }

            .two-column {
                grid-template-columns: 1fr;
            }
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #2563eb;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2563eb;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .rookie-with-team {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .rookie-with-team .team-label {
            font-size: 0.8rem;
            color: #92400e;
            background: #fef3c7;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAw_O85ErUC-_m3UozqOUETQdHGr7UtfEQ",
            authDomain: "week-3-and-4-feedback-form.firebaseapp.com",
            projectId: "week-3-and-4-feedback-form",
            storageBucket: "week-3-and-4-feedback-form.firebasestorage.app",
            messagingSenderId: "438693244020",
            appId: "1:438693244020:web:ee0c6afd67bf51dc023521"
        };

        // Initialize Firebase
        let db;
        try {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            db = firebase.firestore();
        } catch (error) {
            console.log("Firebase initialization skipped for demo");
        }

        // Main App Component
        function FeedbackApp() {
            const [activeTab, setActiveTab] = useState('submit');
            const [teams, setTeams] = useState([]);
            const [rookies, setRookies] = useState([]);
            const [mentors, setMentors] = useState([]);
            const [feedbacks, setFeedbacks] = useState([]);
            const [loading, setLoading] = useState(false);
            const [successMessage, setSuccessMessage] = useState('');

            // Form state
            const [formData, setFormData] = useState({
                rookieName: '',
                mentorName: '',
                date: new Date().toISOString().split('T')[0],
                attendance: '',
                attitude: '',
                workEthic: '',
                improvementAreas: '',
                notes: ''
            });

            // Filter state
            const [selectedRookie, setSelectedRookie] = useState('');
            const [selectedTeamFilter, setSelectedTeamFilter] = useState('');

            // Load data from Firebase
            useEffect(() => {
                loadData();
            }, []);

            const loadData = async () => {
                if (!db) return;
                setLoading(true);
                try {
                    // Load teams
                    const teamsSnapshot = await db.collection('teams').get();
                    setTeams(teamsSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));

                    // Load rookies
                    const rookiesSnapshot = await db.collection('rookies').get();
                    setRookies(rookiesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));

                    // Load mentors
                    const mentorsSnapshot = await db.collection('mentors').get();
                    setMentors(mentorsSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));

                    // Load feedbacks
                    const feedbacksSnapshot = await db.collection('feedbacks').orderBy('date', 'desc').get();
                    setFeedbacks(feedbacksSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                } catch (error) {
                    console.error("Error loading data:", error);
                }
                setLoading(false);
            };

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };

            const handleRatingClick = (field, value) => {
                setFormData(prev => ({ ...prev, [field]: value }));
            };

            const handleSubmitFeedback = async (e) => {
                e.preventDefault();
                if (!db) {
                    alert("Firebase not configured. Please add your Firebase credentials.");
                    return;
                }

                // Get rookie's team
                const rookie = rookies.find(r => r.name === formData.rookieName);
                const teamName = rookie?.teamName || '';

                setLoading(true);
                try {
                    await db.collection('feedbacks').add({
                        ...formData,
                        teamName,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });

                    setSuccessMessage('Feedback submitted successfully!');
                    setTimeout(() => setSuccessMessage(''), 3000);

                    // Reset form
                    setFormData({
                        rookieName: '',
                        mentorName: '',
                        date: new Date().toISOString().split('T')[0],
                        attendance: '',
                        attitude: '',
                        workEthic: '',
                        improvementAreas: '',
                        notes: ''
                    });

                    loadData();
                } catch (error) {
                    console.error("Error submitting feedback:", error);
                    alert("Error submitting feedback. Please try again.");
                }
                setLoading(false);
            };

            const handleAddTeam = async (teamName) => {
                if (!db) {
                    alert("Firebase not configured. Please add your Firebase credentials.");
                    return;
                }
                if (!teamName.trim()) return;

                setLoading(true);
                try {
                    await db.collection('teams').add({ name: teamName.trim() });
                    loadData();
                    setSuccessMessage(`Team "${teamName}" added successfully!`);
                    setTimeout(() => setSuccessMessage(''), 3000);
                } catch (error) {
                    console.error("Error adding team:", error);
                    alert("Error adding team. Please try again.");
                }
                setLoading(false);
            };

            const handleDeleteTeam = async (id, teamName) => {
                if (!db) return;
                if (!confirm('Are you sure you want to delete this team? All rookies in this team will be moved to "No Team".')) return;
                
                setLoading(true);
                try {
                    // First, move all rookies from this team to "No Team"
                    const rookiesInTeam = rookies.filter(r => r.teamName === teamName);
                    for (const rookie of rookiesInTeam) {
                        await db.collection('rookies').doc(rookie.id).update({ teamName: '' });
                    }
                    
                    // Then delete the team
                    await db.collection('teams').doc(id).delete();
                    
                    setSuccessMessage(`Team deleted and ${rookiesInTeam.length} rookie(s) moved to "No Team"`);
                    setTimeout(() => setSuccessMessage(''), 3000);
                    
                    loadData();
                } catch (error) {
                    console.error("Error deleting team:", error);
                }
                setLoading(false);
            };

            const handleAddRookieWithTeam = async (name, teamName) => {
                if (!db) {
                    alert("Firebase not configured. Please add your Firebase credentials.");
                    return;
                }

                setLoading(true);
                try {
                    await db.collection('rookies').add({ 
                        name: name.trim(),
                        teamName: teamName || ''
                    });
                    loadData();
                } catch (error) {
                    console.error("Error adding rookie:", error);
                    alert("Error adding rookie. Please try again.");
                }
                setLoading(false);
            };

            const handleDeleteRookie = async (id) => {
                if (!db) return;
                if (!confirm('Are you sure you want to delete this rookie?')) return;
                
                setLoading(true);
                try {
                    await db.collection('rookies').doc(id).delete();
                    loadData();
                } catch (error) {
                    console.error("Error deleting rookie:", error);
                }
                setLoading(false);
            };

            const handleAddMentors = async (text) => {
                if (!db) {
                    alert("Firebase not configured. Please add your Firebase credentials.");
                    return;
                }

                const newMentors = text
                    .split('\n')
                    .map(line => line.trim())
                    .filter(line => line.length > 0)
                    .map(name => ({ name }));

                setLoading(true);
                try {
                    for (const mentor of newMentors) {
                        await db.collection('mentors').add(mentor);
                    }
                    loadData();
                    setSuccessMessage(`${newMentors.length} mentor(s) added successfully!`);
                    setTimeout(() => setSuccessMessage(''), 3000);
                } catch (error) {
                    console.error("Error adding mentors:", error);
                    alert("Error adding mentors. Please try again.");
                }
                setLoading(false);
            };

            const handleDeleteMentor = async (id) => {
                if (!db) return;
                if (!confirm('Are you sure you want to delete this mentor?')) return;
                
                setLoading(true);
                try {
                    await db.collection('mentors').doc(id).delete();
                    loadData();
                } catch (error) {
                    console.error("Error deleting mentor:", error);
                }
                setLoading(false);
            };

            const handleDeleteFeedback = async (id) => {
                if (!db) return;
                if (!confirm('Are you sure you want to delete this feedback? This cannot be undone.')) return;
                
                setLoading(true);
                try {
                    await db.collection('feedbacks').doc(id).delete();
                    setSuccessMessage('Feedback deleted successfully!');
                    setTimeout(() => setSuccessMessage(''), 3000);
                    loadData();
                } catch (error) {
                    console.error("Error deleting feedback:", error);
                    alert("Error deleting feedback. Please try again.");
                }
                setLoading(false);
            };

            // Filter rookies by team
            const rookiesByTeam = selectedTeamFilter
                ? rookies.filter(r => r.teamName === selectedTeamFilter)
                : rookies;

            // Filter feedbacks
            let filteredFeedbacks = feedbacks;
            if (selectedRookie) {
                filteredFeedbacks = filteredFeedbacks.filter(f => f.rookieName === selectedRookie);
            }
            if (selectedTeamFilter) {
                filteredFeedbacks = filteredFeedbacks.filter(f => f.teamName === selectedTeamFilter);
            }

            return (
                <div className="container">
                    <div className="header">
                        <h1>Training Feedback System</h1>
                        <p>Week 3 & 4 Performance Reviews</p>
                    </div>

                    <div className="tabs">
                        <button 
                            className={`tab ${activeTab === 'submit' ? 'active' : ''}`}
                            onClick={() => setActiveTab('submit')}
                        >
                            Submit Feedback
                        </button>
                        <button 
                            className={`tab ${activeTab === 'view' ? 'active' : ''}`}
                            onClick={() => setActiveTab('view')}
                        >
                            View Feedback
                        </button>
                        <button 
                            className={`tab ${activeTab === 'manage' ? 'active' : ''}`}
                            onClick={() => setActiveTab('manage')}
                        >
                            Manage Names
                        </button>
                    </div>

                    {successMessage && (
                        <div className="success-message">{successMessage}</div>
                    )}

                    {activeTab === 'submit' && (
                        <SubmitFeedbackTab
                            formData={formData}
                            rookies={rookies}
                            mentors={mentors}
                            teams={teams}
                            selectedTeamFilter={selectedTeamFilter}
                            setSelectedTeamFilter={setSelectedTeamFilter}
                            rookiesByTeam={rookiesByTeam}
                            handleInputChange={handleInputChange}
                            handleRatingClick={handleRatingClick}
                            handleSubmitFeedback={handleSubmitFeedback}
                            loading={loading}
                        />
                    )}

                    {activeTab === 'view' && (
                        <ViewFeedbackTab
                            rookies={rookies}
                            teams={teams}
                            selectedRookie={selectedRookie}
                            setSelectedRookie={setSelectedRookie}
                            selectedTeamFilter={selectedTeamFilter}
                            setSelectedTeamFilter={setSelectedTeamFilter}
                            filteredFeedbacks={filteredFeedbacks}
                            loading={loading}
                            handleDeleteFeedback={handleDeleteFeedback}
                        />
                    )}

                    {activeTab === 'manage' && (
                        <ManageNamesTab
                            teams={teams}
                            rookies={rookies}
                            mentors={mentors}
                            handleAddTeam={handleAddTeam}
                            handleDeleteTeam={handleDeleteTeam}
                            handleAddRookieWithTeam={handleAddRookieWithTeam}
                            handleDeleteRookie={handleDeleteRookie}
                            handleAddMentors={handleAddMentors}
                            handleDeleteMentor={handleDeleteMentor}
                            loading={loading}
                        />
                    )}
                </div>
            );
        }

        // Submit Feedback Tab Component
        function SubmitFeedbackTab({ formData, rookies, mentors, teams, selectedTeamFilter, setSelectedTeamFilter, rookiesByTeam, handleInputChange, handleRatingClick, handleSubmitFeedback, loading }) {
            return (
                <div className="card">
                    <h2>Submit Feedback</h2>

                    {teams.length > 0 && (
                        <div className="team-selection-area">
                            <label>Filter by Team (Optional)</label>
                            <div className="name-list">
                                <div 
                                    className={`team-tag ${selectedTeamFilter === '' ? 'selected' : ''}`}
                                    onClick={() => setSelectedTeamFilter('')}
                                >
                                    All Teams
                                </div>
                                {teams.map(team => (
                                    <div
                                        key={team.id}
                                        className={`team-tag ${selectedTeamFilter === team.name ? 'selected' : ''}`}
                                        onClick={() => setSelectedTeamFilter(team.name)}
                                    >
                                        {team.name}
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    <form onSubmit={handleSubmitFeedback}>
                        <div className="form-group">
                            <label>Rookie Name *</label>
                            <select
                                name="rookieName"
                                value={formData.rookieName}
                                onChange={handleInputChange}
                                required
                            >
                                <option value="">Select a rookie...</option>
                                {rookiesByTeam.map(rookie => (
                                    <option key={rookie.id} value={rookie.name}>
                                        {rookie.name} {rookie.teamName ? `(${rookie.teamName})` : ''}
                                    </option>
                                ))}
                            </select>
                        </div>

                        <div className="form-group">
                            <label>Mentor Name *</label>
                            <select
                                name="mentorName"
                                value={formData.mentorName}
                                onChange={handleInputChange}
                                required
                            >
                                <option value="">Select a mentor...</option>
                                {mentors.map(mentor => (
                                    <option key={mentor.id} value={mentor.name}>
                                        {mentor.name}
                                    </option>
                                ))}
                            </select>
                        </div>

                        <div className="form-group">
                            <label>Date *</label>
                            <input
                                type="date"
                                name="date"
                                value={formData.date}
                                onChange={handleInputChange}
                                required
                            />
                        </div>

                        <div className="form-group">
                            <label>Attendance *</label>
                            <div className="rating-group">
                                {['Excellent', 'Good', 'Fair', 'Poor'].map(rating => (
                                    <div
                                        key={rating}
                                        className={`rating-option ${formData.attendance === rating ? 'selected' : ''}`}
                                        onClick={() => handleRatingClick('attendance', rating)}
                                    >
                                        {rating}
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="form-group">
                            <label>Attitude *</label>
                            <div className="rating-group">
                                {['Excellent', 'Good', 'Fair', 'Poor'].map(rating => (
                                    <div
                                        key={rating}
                                        className={`rating-option ${formData.attitude === rating ? 'selected' : ''}`}
                                        onClick={() => handleRatingClick('attitude', rating)}
                                    >
                                        {rating}
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="form-group">
                            <label>Work Ethic *</label>
                            <div className="rating-group">
                                {['Excellent', 'Good', 'Fair', 'Poor'].map(rating => (
                                    <div
                                        key={rating}
                                        className={`rating-option ${formData.workEthic === rating ? 'selected' : ''}`}
                                        onClick={() => handleRatingClick('workEthic', rating)}
                                    >
                                        {rating}
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="form-group">
                            <label>Improvement Areas</label>
                            <textarea
                                name="improvementAreas"
                                value={formData.improvementAreas}
                                onChange={handleInputChange}
                                placeholder="What areas need improvement?"
                            />
                        </div>

                        <div className="form-group">
                            <label>Additional Notes</label>
                            <textarea
                                name="notes"
                                value={formData.notes}
                                onChange={handleInputChange}
                                placeholder="Any additional comments or observations..."
                            />
                        </div>

                        <button type="submit" className="btn btn-primary" disabled={loading}>
                            {loading ? 'Submitting...' : 'Submit Feedback'}
                        </button>
                    </form>
                </div>
            );
        }

        // View Feedback Tab Component
        function ViewFeedbackTab({ rookies, teams, selectedRookie, setSelectedRookie, selectedTeamFilter, setSelectedTeamFilter, filteredFeedbacks, loading, handleDeleteFeedback }) {
            return (
                <div className="card">
                    <h2>View Feedback</h2>
                    
                    <div className="filter-section">
                        <div className="form-group">
                            <label>Filter by Team</label>
                            <select
                                value={selectedTeamFilter}
                                onChange={(e) => {
                                    setSelectedTeamFilter(e.target.value);
                                    setSelectedRookie(''); // Reset rookie filter when team changes
                                }}
                            >
                                <option value="">All Teams</option>
                                {teams.map(team => (
                                    <option key={team.id} value={team.name}>
                                        {team.name}
                                    </option>
                                ))}
                            </select>
                        </div>

                        <div className="form-group">
                            <label>Filter by Rookie</label>
                            <select
                                value={selectedRookie}
                                onChange={(e) => setSelectedRookie(e.target.value)}
                            >
                                <option value="">All Rookies</option>
                                {rookies
                                    .filter(r => !selectedTeamFilter || r.teamName === selectedTeamFilter)
                                    .map(rookie => (
                                        <option key={rookie.id} value={rookie.name}>
                                            {rookie.name}
                                        </option>
                                    ))}
                            </select>
                        </div>
                    </div>

                    {loading ? (
                        <div className="loading">
                            <div className="spinner"></div>
                            <p>Loading feedback...</p>
                        </div>
                    ) : filteredFeedbacks.length === 0 ? (
                        <div className="empty-state">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                            <h3>No feedback entries found</h3>
                            <p>Submit some feedback to see it here</p>
                        </div>
                    ) : (
                        filteredFeedbacks.map(feedback => (
                            <div key={feedback.id} className="feedback-entry">
                                <div className="feedback-header">
                                    <div>
                                        <h3>{feedback.rookieName}</h3>
                                        {feedback.teamName && (
                                            <span className="team-badge">{feedback.teamName}</span>
                                        )}
                                        <div className="feedback-meta">
                                            Mentor: {feedback.mentorName} | Date: {feedback.date}
                                        </div>
                                    </div>
                                    <button 
                                        className="btn-delete"
                                        onClick={() => handleDeleteFeedback(feedback.id)}
                                        title="Delete this feedback"
                                    >
                                        üóëÔ∏è Delete
                                    </button>
                                </div>
                                <div className="feedback-field">
                                    <strong>Attendance:</strong> {feedback.attendance}
                                </div>
                                <div className="feedback-field">
                                    <strong>Attitude:</strong> {feedback.attitude}
                                </div>
                                <div className="feedback-field">
                                    <strong>Work Ethic:</strong> {feedback.workEthic}
                                </div>
                                {feedback.improvementAreas && (
                                    <div className="feedback-field">
                                        <strong>Improvement Areas:</strong> {feedback.improvementAreas}
                                    </div>
                                )}
                                {feedback.notes && (
                                    <div className="feedback-field">
                                        <strong>Notes:</strong> {feedback.notes}
                                    </div>
                                )}
                            </div>
                        ))
                    )}
                </div>
            );
        }

        // Manage Names Tab Component
        function ManageNamesTab({ teams, rookies, mentors, handleAddTeam, handleDeleteTeam, handleAddRookieWithTeam, handleDeleteRookie, handleAddMentors, handleDeleteMentor, loading }) {
            const [teamInput, setTeamInput] = useState('');
            const [selectedTeam, setSelectedTeam] = useState('');
            const [rookieInput, setRookieInput] = useState('');
            const [mentorInput, setMentorInput] = useState('');

            const handleAddTeamClick = () => {
                if (teamInput.trim()) {
                    handleAddTeam(teamInput);
                    setTeamInput('');
                }
            };

            const handleAddRookiesClick = () => {
                if (!rookieInput.trim()) return;
                
                const names = rookieInput
                    .split('\n')
                    .map(line => line.trim())
                    .filter(line => line.length > 0);

                names.forEach(name => {
                    handleAddRookieWithTeam(name, selectedTeam);
                });

                setRookieInput('');
            };

            const rookiesByTeam = selectedTeam
                ? rookies.filter(r => r.teamName === selectedTeam)
                : rookies.filter(r => !r.teamName);

            return (
                <>
                    {/* Manage Teams */}
                    <div className="card">
                        <h2>Manage Teams</h2>
                        <div className="name-input-area">
                            <label>Add Team Name</label>
                            <input
                                type="text"
                                value={teamInput}
                                onChange={(e) => setTeamInput(e.target.value)}
                                placeholder="e.g., CD Playas üíø"
                                onKeyPress={(e) => e.key === 'Enter' && handleAddTeamClick()}
                            />
                            <button
                                className="btn btn-secondary"
                                onClick={handleAddTeamClick}
                                disabled={loading || !teamInput.trim()}
                            >
                                Add Team
                            </button>
                        </div>

                        <div>
                            <label>Current Teams ({teams.length})</label>
                            <div className="name-list">
                                {teams.map(team => (
                                    <div key={team.id} className="team-tag">
                                        {team.name}
                                        <button onClick={() => handleDeleteTeam(team.id, team.name)}>√ó</button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Manage Rookies */}
                    <div className="card">
                        <h2>Manage Rookies</h2>
                        
                        <div className="team-selection-area">
                            <label>Select Team for Rookies</label>
                            <div className="name-list">
                                <div 
                                    className={`team-tag ${selectedTeam === '' ? 'selected' : ''}`}
                                    onClick={() => setSelectedTeam('')}
                                >
                                    No Team
                                </div>
                                {teams.map(team => (
                                    <div
                                        key={team.id}
                                        className={`team-tag ${selectedTeam === team.name ? 'selected' : ''}`}
                                        onClick={() => setSelectedTeam(team.name)}
                                    >
                                        {team.name}
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="name-input-area">
                            <label>Add Rookies to {selectedTeam || "No Team"} (one name per line)</label>
                            <textarea
                                value={rookieInput}
                                onChange={(e) => setRookieInput(e.target.value)}
                                placeholder="Rob Smith&#10;Julian Garcia&#10;Roman M"
                            />
                            <button
                                className="btn btn-secondary"
                                onClick={handleAddRookiesClick}
                                disabled={loading || !rookieInput.trim()}
                            >
                                Add Rookies to {selectedTeam || "No Team"}
                            </button>
                        </div>

                        <div>
                            <label>
                                {selectedTeam ? `Rookies in ${selectedTeam}` : 'Rookies without Team'} ({rookiesByTeam.length})
                            </label>
                            <div className="name-list">
                                {rookiesByTeam.map(rookie => (
                                    <div key={rookie.id} className="name-tag">
                                        {rookie.name}
                                        <button onClick={() => handleDeleteRookie(rookie.id)}>√ó</button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Manage Mentors */}
                    <div className="card">
                        <h2>Manage Mentors</h2>
                        <div className="name-input-area">
                            <label>Add Mentors (one name per line)</label>
                            <textarea
                                value={mentorInput}
                                onChange={(e) => setMentorInput(e.target.value)}
                                placeholder="Sarah Williams&#10;Tom Brown&#10;Lisa Anderson"
                            />
                            <button
                                className="btn btn-secondary"
                                onClick={() => {
                                    handleAddMentors(mentorInput);
                                    setMentorInput('');
                                }}
                                disabled={loading || !mentorInput.trim()}
                            >
                                Add Mentors
                            </button>
                        </div>

                        <div>
                            <label>Current Mentors ({mentors.length})</label>
                            <div className="name-list">
                                {mentors.map(mentor => (
                                    <div key={mentor.id} className="name-tag">
                                        {mentor.name}
                                        <button onClick={() => handleDeleteMentor(mentor.id)}>√ó</button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </>
            );
        }

        // Render the app
        ReactDOM.render(<FeedbackApp />, document.getElementById('root'));
    </script>
</body>
</html>
